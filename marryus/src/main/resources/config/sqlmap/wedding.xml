<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.marryus.repository.mapper.WeddingHallMapper">
	<resultMap id="comInfoMap" type="CompanyInfo">
		<result  property="comInfoNo"   column="com_info_no"/>
		<result  property="memNo"   column="mem_no"/>
        <result  property="comInfoContent"   column="com_info_content"/>
		<result  property="comInfoProfile"   column="com_info_profile"/>
		<result  property="comInfoName"   column="com_info_name"/>
		<result  property="comInfoPhone"   column="com_info_phone"/>
		<result  property="comInfoAddr"   column="com_info_addr"/>
		<result  property="comInfoAddrDetail"   column="com_info_addr_detail"/>
		<result  property="comInfoType"   column="com_info_type"/>
		<result  property="comInfoOkay"   column="com_info_okay"/>
		<result  property="comFileName"   column="com_file_name"/>
		<result  property="comFilePath"   column="com_file_path"/>
	</resultMap>
	
	<resultMap id="comFileMap" type="CompanyFile">
		<result  property="comFileNo"   column="com_file_no"/>
		<result  property="comInfoNo"   column="com_info_no"/>
		<result  property="comFileName"   column="com_file_name"/>
		<result  property="comFileOriname"   column="com_file_oriname"/>
		<result  property="comFilePath"   column="com_file_path"/>
		<result  property="comFileRepr"   column="com_file_repr"/>
	</resultMap>
	
<!-- 	<select id="weddingList" parameterType="Page" resultMap="comInfoMap"> -->
<!-- 		select @rownum:=@rownum+1 as no, b.*, (select count(*) from mu_company_info where com_info_type = 'v') as cnt -->
<!-- 		  from mu_company_info b, (select @rownum:=0) TMP -->
<!-- 		 where com_info_type = 'v' -->
<!-- 		 order by no desc -->
<!-- 		 limit #{begin}, 10 -->
<!-- 	</select> -->
	
	<select id="weddingList" parameterType="Page" resultMap="comInfoMap">
		select  f.com_file_name, f.com_file_path, f.com_file_oriname, i.com_info_name, i.com_info_addr, i.com_info_profile
		 from mu_company_file f
		inner join mu_company_info i
		 on f.com_info_no = i.com_info_no
		 where i.com_info_type = 'v'
		 order by i.com_info_no desc
		 limit #{begin}, 12
		 
	</select>



	
	<select id="selectWeddingCount" resultType="int">
		select count(*)
		from mu_company_info
		where com_info_type = 'v'
	</select>
	
	
</mapper>
























